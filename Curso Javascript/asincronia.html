<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Asincronia</title>
</head>

<body>
  <h1>
    Asincronia
    <script>
      /* console.log("inicio");
    setTimeout(() => {
      console.log("Ejecutando un setTimeout, esto se ejecuta una sóla vez");
    }, 3000);
    setInterval(() => {
      console.log("Ejecutando un setInterval, esto se ejecuta indefinidaente cada cierto intervalo de tiempo");
    }, 1000); */

      /* let temporizador = setTimeout(() => {
        console.log(new Date().toLocaleTimeString());
      }, 1000);
      clearTimeout(temporizador);
      console.log("después del clearTimeout"); */

      /* let temporizador = setInterval(() => {
        console.log(new Date().toLocaleTimeString());
      }, 1000);
      clearInterval(temporizador);
      console.log("después del clearInterval"); */


      // function cuadradoCallback(value, callback) {
      //   setTimeout(() => {
      //     callback(value, value * value)

      //   }, 0 | Math.random() * 1000);


      // }
      // cuadradoCallback(0, (value, result) => {
      //   console.log("Inicia callback")
      //   console.log(`callback ${value}, ${result}`)
      //   cuadradoCallback(1, (value, result) => {
      //     console.log(`callback ${value}, ${result}`)
      //     cuadradoCallback(2, (value, result) => {
      //       console.log(`callback ${value}, ${result}`)
      //       cuadradoCallback(3, (value, result) => {
      //         console.log(`callback ${value}, ${result}`)
      //         cuadradoCallback(4, (value, result) => {
      //           console.log(`callback ${value}, ${result}`)
      //           cuadradoCallback(5, (value, result) => {
      //             console.log(`callback ${value}, ${result}`)
      //             cuadradoCallback(6, (value, result) => {
      //               console.log(`callback ${value}, ${result}`)
      //             })
      //           })
      //         })
      //       })
      //     })
      //   })

      // })
      function cuadradoPromise(value,) {
        if (typeof value !== "number") return Promise.reject(`Error el valor " ${value}" ingresado no es un numero`)
        return new Promise((resolve, reject) => {
          setTimeout(() => {
            resolve({
              value,
              result: value * value
            })

          }, 0 | Math.random() * 1000);

        })
      }
      cuadradoPromise(0
      ).then(obj => {
        console.log("Inicia promise")
        console.log(`Promise: ${obj.value}, ${obj.result}`)
        return cuadradoPromise(1)
      })
        .then(obj => {
          console.log(`Promise: ${obj.value}, ${obj.result}`)
          return cuadradoPromise(2)

        })
        .then(obj => {
          console.log(`Promise: ${obj.value}, ${obj.result}`)
          return cuadradoPromise("3")

        })
        .then(obj => {
          console.log(`Promise: ${obj.value}, ${obj.result}`)
          return cuadradoPromise(4)

        })
        .then(obj => {
          console.log(`Promise: ${obj.value}, ${obj.result}`)
          return cuadradoPromise(5)

        })
        .then(obj => {
          console.log(`Promise: ${obj.value}, ${obj.result}`)
          console.log("Fin de la Promise")

        })
        .catch(err => console.error(err))
    </script>
  </h1>
</body>

</html>